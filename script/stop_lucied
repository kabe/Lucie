ENV[ 'RAILS_ENV' ] = 'lucied'


require File.join( File.dirname( __FILE__ ), '..', 'config', 'environment' )
require 'etc'


unless Etc.getpwuid( Process.uid ).name == 'root'
  Lucie::Log.error 'You must be root.'
  exit -1
end


begin
  unless LuciedBlocker.blocked?
    Lucie::Log.error 'Lucie daemon not running (no pid file).'
    exit 0
  end

  LucieDaemon.kill
  sleep 1

rescue => e
  Lucie::Log.error e.message
  exit -1
end


Lucie::Log.verbose = true
Lucie::Log.info 'Lucie daemon stopped.'
exit 0


### Local variables:
### mode: Ruby
### coding: utf-8-unix
### indent-tabs-mode: nil
### End:
